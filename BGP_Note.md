# BGP路由协议

### BGP UPDATE

1. AS路径属性（AS-path）

   AS_PATH是一个公认必选的属性，它用AS号的顺序来描述AS间的路径或到NLRI所明确的目的地的路由。

   只有将更新消息发送给在另一个AS域内的邻居时，BGP路由器才将它的AS号加到AS_PATH中（最左边），也就是说只有在两个EBGP对等体之间公布路由时，AS号才被附加到AS_PATH中。

   AS_PATH属性的另一个功能就是避免环路，如果BGP路由器从它的外部邻居收到一条路由，而该路由AS_PATH包含这个BGP路由器自己的AS号。于是该路由器就知道是条环路路由。

2. 源头属性（Origin）

   + IGP： 路由在起始AS的内部
   + EGP：路由是通过EGP获得的
   + 不完全：路由的源头未知或是通过其他方法获悉的

3. 下一跳属性

   描述了到公布目的地的路径下一跳路由器的IP地址。BGP的下一跳属性不一定就是邻居路由器的IP地址。

   + BGP宣告者把自己产生的路由发给所有邻居时，将把该路由信息的下一跳属性设置为自己与对端链接的接口地址；
   + BGP宣告者把从EGP邻居得到的路由发给IBGP邻居时。并不改变该路由信息的下一跳属性，将从EBGP得到的路由的NEXT-HOP直接传递给IBGP对等体。
   + BGP宣告者把收到的路由发给EBGP邻居时，将把该路由信息的下一跳属性设置为自己与对端连接的接口地址。
   + 对于可以多路访问的网络（以太网或者帧中继），如果通告路由器和源路由器接口处于同一网段，则BGP会向邻居通告路由的实际来源。



