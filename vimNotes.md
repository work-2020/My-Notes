# Vim 笔记

## vim模式

1. 普通模式（normal mode）

vim启动后的默认模式，可以移动光标，删除文本。按`a`或`i`进入插入模式

2. 插入模式（insert mode）

在这个模式中，大多数按键都会向文本缓冲中插入文本，可以按ESC键回到普通模式。

3. 可视模式

移动命令会扩大高亮的文本区域，高亮区域可以是字符、行或是一块文本，当执行非移动命令时，命令会被执行到这块高亮区域。

4. 选择模式（select mode）

在这个模式中，可以用鼠标或者光标高亮选择文本，当输入字符时，vim会用字符替换选择的高亮本文块，并自动进入插入模式。

5. 命令行模式（command line mode）

在命令行模式下可以输入会被解释执行的文本。

6. Ex模式

和命令行模式相似，使用`:visual`命令离开Ex模式前，可以一次执行多条命令。

我们常用的是普通模式、插入模式和命令行模式。普通模式按`a`或`i`进入插入模式，普通模式中按`:`进入命令行模式，命令行模式中输入`wq`回车后保存并退出vim。在插入模式或命令行模式时，按`Esc`进入普通模式。



## 普通模式

**光标移动**

| 按键 | 说明 |
| ---- | ---- |
| h    | 向左移动 |
| l    | 向右移动 |
| j    | 向下移动 |
| k    | 向上移动 |
| w    | 移动到下一个单词 |
| b    | 移动到下一个单词 |

**进入插入模式**

在普通模式下使用下面的键将进入插入模式，并可以从相应的位置开始输入

| 命令 | 说明                                     |
| ---- | ---------------------------------------- |
| `i`  | 在当前光标处进行编辑                     |
| `I`  | 在行首插入                               |
| `A`  | 在行末插入                               |
| `a`  | 在光标后插入编辑                         |
| `o`  | 在当前行后插入一个新行                   |
| `O`  | 在当前行前插入一个新行                   |
| `cw` | 替换从光标所在位置后到一个单词结尾的字符 |

普通模式下输入Shift+zz即可保存退出vim。

**删除文本**

进入普通模式，使用下列命令可以进行文本快速删除：

| 命令      | 说明                       |
| --------- | -------------------------- |
| `x`       | 删除游标所在的字符         |
| `X`       | 删除游标所在前一个字符     |
| `Delete`  | 同`x`                      |
| `dd`      | 删除整行                   |
| `dw`      | 删除一个单词（不适用中文） |
| `d$`或`D` | 删除至行尾                 |
| `d^`      | 删除至行首                 |
| `dG`      | 删除到文档结尾处           |
| `d1G`     | 删至文档首部               |

除此之外，你还可以在命令之前加上数字，表示一次删除多行，如：

`2dd`表示一次删除2行

**行间跳转**

| 命令            | 说明                                                         |
| --------------- | ------------------------------------------------------------ |
| `nG`(n Shift+g) | 游标移动到第 n 行**(如果默认没有显示行号，请先进入命令模式，输入`:set nu`以显示行号)** |
| `gg`            | 游标移动到到第一行                                           |
| `G`(Shift+g)    | 到最后一行                                                   |

**行内跳转**

普通模式下使用下列命令在行内按照单词为单位进行跳转

| 命令      | 说明                                                       |
| --------- | ---------------------------------------------------------- |
| `w`       | 到下一个单词的开头                                         |
| `e`       | 到当前单词的结尾                                           |
| `b`       | 到前一个单词的开头                                         |
| `ge`      | 到前一个单词的结尾                                         |
| `0`或`^`  | 到行头                                                     |
| `$`       | 到行尾                                                     |
| `f<字母>` | 向后搜索<字母>并跳转到第一个匹配的位置(非常实用)           |
| `F<字母>` | 向前搜索<字母>并跳转到第一个匹配的位置                     |
| `t<字母>` | 向后搜索<字母>并跳转到第一个匹配位置之前的一个字母(不常用) |
| `T<字母>` | 向前搜索<字母>并跳转到第一个匹配位置之后的一个字母(不常用) |

**复制粘贴**

- 普通模式中使用`y`复制
  - 普通模式中，`yy`复制游标所在的整行（`3yy`表示复制3行）
  - 普通模式中，`y^` 复制至行首，或`y0`。不含光标所在处字符。
  - 普通模式中，`y$` 复制至行尾。含光标所在处字符。
  - 普通模式中，`yw` 复制一个单词。
  - 普通模式中，`y2w` 复制两个单词。
  - 普通模式中，`yG` 复制至文本末。
  - 普通模式中，`y1G` 复制至文本开头。
- 普通模式中使用 `p` 粘贴
  - 普通模式中，`p`(小写)代表粘贴至光标后（下）
  - 普通模式中，`P`(大写)代表粘贴至光标前（上）

**撤销**

| 命令 | 说明 |
| --------- | ------------------|
| `u`  | 撤销一次操作 |
|  ctrl + r   | 恢复上一次被撤销的操作  |

## 命令行模式

**从命令行模式退出vim**

从普通模式输入`:`进入命令行模式，输入`wq`回车，保存并退出编辑

以下为其它几种退出方式：

| 命令               | 说明             |
| ------------------ | ---------------- |
| `:q!`              | 强制退出，不保存 |
| `:q`               | 退出             |
| `:wq!`             | 强制保存并退出   |
| `:w <文件路径>`    | 另存为           |
| `:saveas 文件路径` | 另存为           |
| `:x`               | 保存并退出       |
| `:wq`              | 保存并退出       |

